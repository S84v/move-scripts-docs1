# Summary
`DBConnectionException` is a custom checked exception that signals a failure to establish or maintain a database connection within the MOVE‑Mediation‑Ingest pipeline. Throwing this exception allows upstream components to differentiate connectivity problems from other runtime errors and trigger appropriate recovery or alerting mechanisms.

# Key Components
- **Class `DBConnectionException` extends `Exception`**
  - `serialVersionUID` – ensures binary compatibility across JVM versions.
  - Constructor `DBConnectionException(String msg)` – forwards a descriptive error message to the base `Exception` class.

# Data Flow
- **Inputs:** Error message string generated by DAO or service layer when a JDBC/connection‑pool operation fails.
- **Outputs:** Propagated exception object caught by higher‑level handlers (e.g., service façade, batch orchestrator).
- **Side Effects:** None; exception carries only diagnostic text.
- **External Services/DBs:** Triggered by any component attempting to connect to the relational database (Oracle, MySQL, etc.) via JDBC or a connection pool.

# Integrations
- **DAO Layer:** Methods that acquire `Connection` objects catch `SQLException` and re‑throw as `DBConnectionException`.
- **Service/Batch Orchestrator:** Catches `DBConnectionException` to log, retry, or abort the current processing window.
- **Monitoring/Alerting:** Exception messages may be forwarded to log aggregation (ELK, Splunk) or alerting pipelines (PagerDuty, OpsGenie).

# Operational Risks
- **Uncaught Propagation:** If not caught, the exception can terminate batch jobs, causing data ingestion gaps. *Mitigation:* Centralized exception handling in the batch runner.
- **Loss of Root Cause:** Wrapping only the message may discard the original `SQLException`. *Mitigation:* Extend constructor to accept `Throwable cause` and preserve stack trace.
- **Inconsistent Messaging:** Varying error strings hinder automated alert parsing. *Mitigation:* Adopt a standard error code/message format.

# Usage
```java
try {
    Connection conn = dataSource.getConnection(); // may throw SQLException
    // use connection
} catch (SQLException e) {
    throw new DBConnectionException("Failed to obtain DB connection: " + e.getMessage());
}
```
Debug by setting a breakpoint on the constructor or by inspecting the thrown exception in logs.

# Configuration
- No environment variables or external config files are referenced directly by this class.
- Relies on the application's datasource configuration (JNDI, Spring properties, etc.) which determines the actual DB connection parameters.

# Improvements
1. **Add cause preservation:**  
   ```java
   public DBConnectionException(String msg, Throwable cause) {
       super(msg, cause);
   }
   ```
2. **Introduce error codes:** Define an enum of connection error codes and include it in the exception to enable structured error handling and alert routing.