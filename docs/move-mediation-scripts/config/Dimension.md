# Summary
`Dimension.properties` defines environment‑specific parameters for the **Dimension** ingestion step of the Move‑Mediation pipeline. It sources common properties, sets script name, process‑status file locations, helper file paths, log file naming, Hive table identifiers, and fully‑qualified Java class names used to load the `time_dimension` and `dateinterval` tables.

# Key Components
- **MNAASDimensionScriptName** – name of the shell wrapper (`Dimension.sh`) that drives the loading process.  
- **MNAAS_Dimension_ProcessStatusFileName** – file used to record success/failure of the Dimension job.  
- **time_dimension_file / date_interval_file** – local helper files containing raw dimension data for Hive loading.  
- **MNAAS_DimensionLogPath** – date‑stamped log file path for audit and troubleshooting.  
- **time_dimension_tblname** – Hive table name (`time_dimension`).  
- **date_interval_tblname** – Hive table name (`dateinterval`).  
- **Dimension_class_name** – Java loader class (`com.tcl.dimensions.date_dimension`).  
- **Dateinterval_class_name** – Java loader class (`com.tcl.dimensions.dateinterval`).  

# Data Flow
1. **Input**: Raw dimension data files (`time_dimension_file`, `date_interval_file`) generated by upstream ETL steps.  
2. **Processing**: `Dimension.sh` invokes the Java classes `com.tcl.dimensions.date_dimension` and `com.tcl.dimensions.dateinterval`, passing the helper files as arguments.  
3. **Output**: Populates Hive tables `time_dimension` and `dateinterval`.  
4. **Side Effects**: Writes execution log to `MNAAS_DimensionLogPath`; updates process‑status file `MNAAS_Dimension_ProcessStatusFileName`.  
5. **External Services**: Hive metastore (DDL/DML), Hadoop HDFS for file storage, Java runtime.

# Integrations
- **MNAAS_CommonProperties.properties** – sourced at the top; provides base paths (`MNAASConfPath`, `MNAASLocalLogPath`, etc.).  
- **Dimension.sh** – shell script that reads this properties file, constructs classpath, and launches the Java loaders.  
- Downstream jobs that depend on the populated `time_dimension` and `dateinterval` tables (e.g., billing, reporting pipelines).  

# Operational Risks
- **Missing helper files** – job fails; mitigate with pre‑flight existence checks.  
- **Stale process‑status file** – may cause false success detection; ensure file is truncated at job start.  
- **Log path permission issues** – prevent log creation; enforce correct OS permissions on `MNAASLocalLogPath`.  
- **Hive table schema drift** – Java loaders may break; version‑control Hive DDL and align with loader expectations.

# Usage
```bash
# Load common properties
source /app/hadoop_users/MNAAS/MNAAS_Property_Files/MNAAS_CommonProperties.properties

# Execute the Dimension step
bash $MNAASConfPath/Dimension.sh
```
To debug, set `set -x` in `Dimension.sh` and inspect `$MNAAS_DimensionLogPath`.

# Configuration
- **Environment Variables** (provided by `MNAAS_CommonProperties.properties`):  
  - `MNAASConfPath` – directory containing this properties file and helper files.  
  - `MNAASLocalLogPath` – base directory for logs.  
- **Referenced Config Files**:  
  - `MNAAS_CommonProperties.properties` (global defaults).  

# Improvements
1. **Add validation block** in `Dimension.sh` to verify existence and readability of `time_dimension_file` and `date_interval_file` before invoking Java loaders.  
2. **Externalize log rotation** by integrating with a log‑management tool (e.g., logrotate) to prevent unbounded log growth.