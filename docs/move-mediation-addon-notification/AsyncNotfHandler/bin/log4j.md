# Summary
Defines Log4j logging configuration for the **AsyncNotfHandler** component of the mediation‑addon‑notification service. Sets the root logger to INFO level and attaches two appenders: a daily‑rolling file appender (`File`) and a console appender (`stdout`). Enables runtime log persistence and console visibility for troubleshooting in the telecom production move system.

# Key Components
- **log4j.rootLogger** – root logger definition; level `INFO`, attached appenders `File` and `stdout`.
- **log4j.appender.File** – `org.apache.log4j.DailyRollingFileAppender` writing to `${logfile.name}`; uses `PatternLayout` with conversion pattern `[%-5p] %d{ISO8601} %c - %m%n`.
- **log4j.appender.stdout** – `org.apache.log4j.ConsoleAppender` targeting `System.out`; same `PatternLayout` as file appender.

# Data Flow
- **Input:** Log events generated by Java classes in the AsyncNotfHandler package (or any class using Log4j).
- **Processing:** Log4j evaluates each event against the root logger level (INFO). Matching events are formatted by the defined `PatternLayout`.
- **Outputs:**  
  1. **File appender:** Writes formatted log lines to the file path resolved from `${logfile.name}`; file rolls daily.  
  2. **Console appender:** Writes formatted log lines to standard output (STDOUT) of the JVM process.
- **Side Effects:** Creation of log files on the host filesystem; potential STDOUT capture by container orchestration or process supervisor.

# Integrations
- **Environment variable `${logfile.name}`** – supplied by the deployment scripts or container environment; points to the physical log file location.
- **AsyncNotfHandler Java code** – any class invoking `org.apache.log4j.Logger` inherits this configuration automatically.
- **Process supervisors (e.g., systemd, Docker)** – may capture STDOUT for centralized log aggregation.

# Operational Risks
- **Missing `${logfile.name}`** → Log4j falls back to a literal `${logfile.name}` filename, causing file creation failures. *Mitigation:* Validate environment variable at startup; fail fast if undefined.
- **Unbounded disk usage** – DailyRollingFileAppender does not purge old files. *Mitigation:* Implement log rotation retention policy via external log management or switch to `RollingFileAppender` with size limits.
- **INFO level may expose sensitive data** – Verbose logs could contain PII or credentials. *Mitigation:* Review log statements; consider masking sensitive fields or lowering level to WARN in production.

# Usage
```bash
# Set required environment variable
export logfile.name=/var/log/asyncnotfhandler/asyncnotf.log

# Start the Java service (example)
java -Dlog4j.configuration=file:/path/to/log4j.properties -jar asyncnotfhandler.jar
```
To debug, adjust `log4j.rootLogger` to `DEBUG` and restart the service.

# configuration
- **Environment Variable:** `logfile.name` – absolute path for the daily rolling log file.
- **External Config File:** `log4j.properties` (this file) – must be on the classpath or referenced via `-Dlog4j.configuration`.

# Improvements
1. **Add retention policy:** Replace `DailyRollingFileAppender` with `RollingFileAppender` configured with `MaxBackupIndex` to limit retained log files.
2. **Externalize log level:** Introduce `${log.level}` placeholder to allow dynamic adjustment of the root logger level without code changes.