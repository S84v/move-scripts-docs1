# Summary
Defines Log4j configuration for the Move Mediation Notification Handler. Sets the root logger to INFO and routes log events to a daily‑rolling file (path supplied by `${logfile.name}`) and to the console (STDOUT). Used at runtime by all Java classes in the component to produce operational and audit logs.

# Key Components
- **log4j.rootLogger** – Root logger level `INFO`; attaches `File` and `stdout` appenders.  
- **File appender (`org.apache.log4j.DailyRollingFileAppender`)** – Writes logs to `${logfile.name}`; rolls over daily.  
- **File appender layout (`PatternLayout`)** – Format: `[%-5p] %d{ISO8601} %c - %m%n`.  
- **Console appender (`org.apache.log4j.ConsoleAppender`)** – Writes logs to `System.out`.  
- **Console appender layout (`PatternLayout`)** – Same pattern as file appender.

# Data Flow
- **Input:** Log events generated by Java classes via `org.apache.log4j.Logger`.  
- **Processing:** Log4j evaluates logger level, formats message using the defined pattern.  
- **Outputs:**  
  1. Daily‑rolled log file at `${logfile.name}`.  
  2. STDOUT stream captured by the process manager (e.g., systemd, Docker).  
- **Side Effects:** File creation, daily rollover, potential I/O load on the host filesystem. No direct DB or queue interaction.

# Integrations
- Consumed implicitly by any Java class in the notification handler that obtains a Log4j `Logger`.  
- External scripts (e.g., start‑up wrappers) must set the `logfile.name` system property before JVM launch.  
- Log aggregation tools (ELK, Splunk) ingest the generated files or STDOUT stream.

# Operational Risks
- **Missing `logfile.name` property** → Log4j defaults to a literal `${logfile.name}` file, causing I/O errors. *Mitigation:* enforce property via start‑up script or default fallback.  
- **Disk exhaustion** → Unbounded file growth if daily files are not archived or purged. *Mitigation:* implement log retention policy (cron cleanup, logrotate).  
- **Incorrect log level** → INFO may be too verbose for production; DEBUG could expose sensitive data. *Mitigation:* adjust level via environment‑specific override.  
- **File permission issues** → Process may lack write access to target directory. *Mitigation:* ensure proper OS permissions and ownership.

# Usage
```bash
# Example JVM launch with log file path
java -Dlogfile.name=/var/log/mnaas/notfhandler.log \
     -cp lib/*:conf/ move.mediation.notfhandler.Main
```
To increase verbosity for debugging:
```bash
java -Dlogfile.name=/var/log/mnaas/notfhandler.log \
     -Dlog4j.rootLogger=DEBUG,File,stdout ...
```

# Configuration
- **System Property:** `logfile.name` – absolute path for the rolling log file.  
- **File:** `move-mediation-common-notification\NotfHandler\src\log4j.properties` – loaded automatically if placed on the classpath.  
- No additional external config files referenced.

# Improvements
1. Externalize log level and pattern to environment‑specific properties (e.g., `log4j.production.properties`) to avoid code changes per environment.  
2. Replace `DailyRollingFileAppender` with `RollingFileAppender` + `TimeBasedRollingPolicy` (Log4j 1.2.17) or migrate to Log4j2 for better rollover reliability and compression.