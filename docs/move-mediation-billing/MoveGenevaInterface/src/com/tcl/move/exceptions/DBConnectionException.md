# Summary
`DBConnectionException` is a custom checked exception that encapsulates connectivity‑related failures when accessing the database in the Move‑Geneva mediation pipeline. Throwing this exception enables uniform handling of DB connection errors across DAO and service layers, ensuring consistent logging, transaction rollback, and error propagation to higher‑level components.

# Key Components
- **Class `DBConnectionException`**
  - Extends `java.lang.Exception`.
  - Holds a `serialVersionUID` for serialization compatibility.
  - Provides a single constructor `DBConnectionException(String msg)` that forwards the message to the superclass.

# Data Flow
- **Input:** Error message string generated by DAO or connection‑pool code when a DB connection cannot be established or is lost.
- **Output:** Propagated exception instance caught by service or controller layers.
- **Side Effects:** Triggers logging and potential transaction rollback in calling code.
- **External Services:** Database (any JDBC‑compatible DB) accessed via DAO components that may throw this exception.

# Integrations
- Used by DAO implementations in `com.tcl.move.dao.*` when acquiring a `Connection` from the connection pool.
- Caught by service classes in `com.tcl.move.service.*` to translate into user‑friendly error responses or to trigger retry logic.
- May be wrapped by higher‑level `DatabaseException` for generic DB error handling.

# Operational Risks
- **Uncaught propagation:** If not caught, the exception can abort batch jobs, causing incomplete mediation runs. *Mitigation:* Ensure all DAO calls are wrapped in try‑catch blocks handling `DBConnectionException`.
- **Loss of context:** Only a message is stored; stack trace may be insufficient for root‑cause analysis. *Mitigation:* Include original `SQLException` as a suppressed exception or add a constructor accepting a `Throwable`.
- **Serialization mismatch:** Changing class structure without updating `serialVersionUID` can break deserialization in distributed environments. *Mitigation:* Keep `serialVersionUID` constant or regenerate when class changes.

# Usage
```java
try {
    Connection conn = dataSource.getConnection(); // may throw SQLException
    // ... use connection
} catch (SQLException e) {
    throw new DBConnectionException("Failed to obtain DB connection: " + e.getMessage());
}
```
Debug by setting a breakpoint on the constructor or catching the exception in a test harness and inspecting the message.

# configuration
- No environment variables or external config files are referenced directly by this class.
- Relies on the application's datasource configuration (e.g., JNDI name, JDBC URL) defined elsewhere.

# Improvements
1. Add a constructor `DBConnectionException(String msg, Throwable cause)` to preserve the original `SQLException` as the cause.
2. Implement a static factory method `from(SQLException e)` that creates a `DBConnectionException` with a standardized message format.