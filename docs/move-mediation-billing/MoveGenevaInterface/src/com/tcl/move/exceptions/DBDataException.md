# Summary
`DBDataException` is a custom checked exception that signals data‑related failures encountered while accessing the database within the Move‑Geneva mediation pipeline. It enables uniform error propagation, logging, and transaction handling for data integrity issues across DAO and service layers.

# Key Components
- **Class `DBDataException` (extends `Exception`)**
  - `serialVersionUID` – ensures serialization compatibility.
  - Constructor `DBDataException(String msg)` – forwards a descriptive error message to the superclass.

# Data Flow
- **Input:** Error message string generated by lower‑level components (e.g., DAO validation, result‑set parsing).
- **Output:** Propagated exception object that can be caught by higher‑level services or global exception handlers.
- **Side Effects:** Triggers logging/monitoring when caught; may cause transaction rollback if thrown within a transactional context.
- **External Services/DBs:** None directly; the exception is raised in response to database read/write anomalies.

# Integrations
- Thrown by DAO implementations in `com.tcl.move.dao.*` when data integrity checks fail.
- Caught by service classes in `com.tcl.move.service.*` to translate into user‑visible error codes or to trigger compensating actions.
- May be wrapped by higher‑level exception handlers (e.g., `ExceptionMapper` in REST layer) for HTTP response mapping.

# Operational Risks
- **Uncaught `DBDataException`** – leads to thread termination or generic error responses. *Mitigation:* Ensure all DAO calls are wrapped in try‑catch blocks that handle this exception.
- **Loss of original cause** – only message is preserved; stack trace may be insufficient. *Mitigation:* Consider adding a constructor that accepts a `Throwable cause`.
- **Serialization mismatch** – changing class structure without updating `serialVersionUID`. *Mitigation:* Keep UID constant or regenerate when class changes.

# Usage
```java
// DAO example
public UsageProduct findProduct(String id) throws DBDataException {
    try {
        // DB query logic...
    } catch (SQLException e) {
        throw new DBDataException("Failed to retrieve product with id " + id);
    }
}

// Service example
public UsageProduct getProduct(String id) {
    try {
        return dao.findProduct(id);
    } catch (DBDataException e) {
        logger.error(e.getMessage(), e);
        // translate to business exception or return fallback
        throw new ServiceException("Product data unavailable", e);
    }
}
```

# Configuration
No environment variables or external configuration files are referenced by this class.

# Improvements
1. Add a constructor `DBDataException(String msg, Throwable cause)` to preserve the original exception stack trace.
2. Implement a static factory method `fromSQLException(SQLException e)` to standardize message formatting and cause chaining.