# Summary
The `log4j.properties` file configures Log4j 1.x for the **MoveGenevaInterface** module. It establishes a root logger at INFO level and attaches two appenders: a daily‑rolling file appender (`File`) that writes to the path defined by `${logfile.name}` and a console appender (`stdout`). In production it controls log formatting, persistence, and real‑time console output for the move‑mediation billing pipeline.

# Key Components
- **log4j.rootLogger** – Sets global log level (INFO) and registers `File` and `stdout` appenders.  
- **org.apache.log4j.DailyRollingFileAppender (File)** – Writes logs to `${logfile.name}`; rolls over daily.  
- **org.apache.log4j.ConsoleAppender (stdout)** – Streams logs to `System.out`.  
- **org.apache.log4j.PatternLayout** – Shared layout for both appenders; pattern `[%-5p] %d{ISO8601} %c - %m%n`.

# Data Flow
- **Input:** Log events generated by Java classes in the MoveGenevaInterface codebase (e.g., `com.move.geneva.*`).  
- **Processing:** Log4j routes each event to the configured appenders based on the root logger definition.  
- **Outputs:**  
  - Daily‑rolled log file on the filesystem (`${logfile.name}`).  
  - Standard output stream captured by the process supervisor (e.g., systemd, Docker logs).  
- **Side Effects:** Disk I/O for file appender; potential console log volume affecting monitoring tools.  
- **External Services/DBs:** None directly; logs may be harvested by log aggregation services (e.g., ELK, Splunk) via file tailing or stdout capture.

# Integrations
- **MoveGenevaInterface Java code** – All `org.apache.log4j.Logger` instances inherit this configuration.  
- **Deployment scripts** – Expect `${logfile.name}` to be defined (e.g., via environment variable or wrapper script).  
- **Monitoring/Alerting** – Console output is consumed by the orchestration layer; file logs are ingested by log‑centralization pipelines.

# Operational Risks
- **Missing `${logfile.name}` variable** → File appender fails, causing loss of persisted logs. *Mitigation:* Validate env var at startup; fallback to default path.  
- **Unbounded log file growth** → Disk exhaustion if daily rollover fails. *Mitigation:* Implement retention policy (e.g., delete files >30 days) via logrotate or external cleanup job.  
- **INFO level may be too verbose** → Performance impact under high load. *Mitigation:* Adjust log level per environment (e.g., WARN in production).  
- **Console duplication** → Duplicate log entries in monitoring pipelines. *Mitigation:* Configure downstream collector to de‑duplicate or disable `stdout` in production if not needed.

# Usage
```bash
# Set required variable
export logfile.name=/var/log/movegeneva/interface.log

# Run the Java process (the JVM picks up this file from classpath)
java -Dlog4j.configuration=file:/path/to/move-mediation-billing/MoveGenevaInterface/src/log4j.properties -jar movegeneva.jar
```
To debug configuration:
```bash
# Enable Log4j internal debugging
export log4j.debug=true
java -Dlog4j.debug=true -jar ...
```

# configuration
- **Environment Variable:** `logfile.name` – absolute path for the daily‑rolling log file.  
- **Referenced Config Files:** None; this file is self‑contained but must be on the classpath.  
- **Related Files:** `move-mediation-billing/MoveGenevaInterface/bin/default/log4j.properties` (template used for packaging).

# Improvements
1. **Add log rotation retention** – configure `log4j.appender.File.MaxBackupIndex` or integrate with OS logrotate to purge old files automatically.  
2. **Externalize log level** – replace hard‑coded `INFO` with `${log.level:-INFO}` to allow per‑environment overrides without code changes.